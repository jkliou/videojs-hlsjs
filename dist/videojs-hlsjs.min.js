/*! videojs-hlsjs - v0.0.1 - 2016-03-08
* Copyright (c) 2016 Jack Liou <jkliou@gmail.com>; Licensed Apache-2.0 */
!function(a,b,c,d,e){"use strict";var f=b.getComponent("Component"),g=b.getTech("Tech"),h=b.getComponent("Html5"),i=b.extend(h,{createEl:function(){return this.hls_=new c,this.el_=h.prototype.createEl.apply(this,arguments),this.hls_.on(c.Events.MEDIA_ATTACHED,b.bind(this,this.onMediaAttached)),this.hls_.on(c.Events.MANIFEST_PARSED,b.bind(this,this.onManifestParsed)),this.hls_.on(c.Events.LEVEL_LOADED,b.bind(this,this.onLevelLoaded)),this.hls_.on(c.Events.ERROR,b.bind(this,this.onError)),this.hls_.attachMedia(this.el_),this.src(this.options_.source.src),this.el_.tech=this,this.el_},onMediaAttached:function(){this.triggerReady()},onLevelLoaded:function(a,b){this.duration=b.details.live?function(){return 1/0}:h.prototype.duration},onManifestParsed:function(){this.player().options().autoplay&&this.player().play()},setSrc:function(a){this.hls_.loadSource(a)},onError:function(a,b){if(b.fatal)switch(b.type){case c.ErrorTypes.NETWORK_ERROR:this.log("fatal network error encountered, try to recover"),this.hls_.startLoad();break;case c.ErrorTypes.MEDIA_ERROR:this.log("fatal media error encountered, try to recover"),this.hls_.recoverMediaError();break;default:this.hls_.destroy(),this.error(b)}switch(b.details){case c.ErrorDetails.MANIFEST_LOAD_ERROR:case c.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case c.ErrorDetails.MANIFEST_PARSING_ERROR:case c.ErrorDetails.LEVEL_LOAD_ERROR:case c.ErrorDetails.LEVEL_LOAD_TIMEOUT:case c.ErrorDetails.LEVEL_SWITCH_ERROR:case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.FRAG_PARSING_ERROR:case c.ErrorDetails.BUFFER_APPEND_ERROR:case c.ErrorDetails.BUFFER_APPENDING_ERROR:console.log(b.type),console.log(b.details)}},dispose:function(){return this.hls_.destroy(),h.prototype.dispose.apply(this)}});i.isSupported=function(){return c.isSupported()},i.canPlaySource=function(a,b){return h.canPlaySource(a,b)?!1:(console.log("Hls.isSupported"),c.isSupported())},f.registerComponent("Hlsjs",i),g.registerTech("Hlsjs",i),b.options.techOrder.push("Hlsjs")}(window,videojs,Hls,document);